"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateFullPage = void 0;
const types_1 = require("../../../types");
const text_1 = require("../../../text");
const utils_1 = require("../../../utils");
const validateGlobalModules_1 = require("../../../utils/global/validateGlobalModules");
const errorMessages = text_1.errors.modules.confluence.fullPage;
const validateFullPage = (modules, yamlContentByLine) => {
    const validationErrors = [];
    const moduleType = types_1.AllModuleTypes.ConfluenceFullPage;
    const fullPageModules = modules[moduleType] || [];
    fullPageModules.forEach((module, index) => {
        validationErrors.push(...(0, validateGlobalModules_1.validateRoute)(module.key, module.routePrefix, index, errorMessages).map((error) => ({
            message: error.message,
            reference: text_1.References.Modules,
            level: 'error',
            ...(0, utils_1.findPosition)(error.moduleKey, yamlContentByLine)
        })), ...(module.icon
            ? (0, validateGlobalModules_1.validateIcon)(module.key, module.icon, index, errorMessages).map((error) => ({
                message: error.message,
                reference: text_1.References.Modules,
                level: 'error',
                ...(0, utils_1.findPosition)(error.moduleKey, yamlContentByLine)
            }))
            : []));
    });
    return validationErrors;
};
exports.validateFullPage = validateFullPage;
