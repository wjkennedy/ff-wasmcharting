"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateFileViewerRegexPatterns = void 0;
const text_1 = require("../../../text");
const types_1 = require("../../../types");
const utils_1 = require("../../../utils");
const validateFileViewerRegexPatterns = (modules, yamlContentByLine) => {
    const validationErrors = [];
    const fileViewerModules = modules[types_1.AllModuleTypes.BitbucketRepoCodeFileViewer];
    fileViewerModules?.forEach((module) => {
        if (!module.filePattern) {
            return;
        }
        try {
            new RegExp(module.filePattern);
        }
        catch (error) {
            validationErrors.push({
                message: `Bitbucket module: '${module.key}' has an invalid regex pattern: '${module.filePattern}'.`,
                reference: text_1.References.Modules,
                level: 'error',
                ...(0, utils_1.findPosition)(module.key, yamlContentByLine)
            });
        }
    });
    return validationErrors;
};
exports.validateFileViewerRegexPatterns = validateFileViewerRegexPatterns;
