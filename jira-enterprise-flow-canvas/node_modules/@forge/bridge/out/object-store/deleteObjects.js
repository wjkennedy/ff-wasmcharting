"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.deleteObjects = void 0;
const invoke_1 = require("../invoke");
const errors_1 = require("../errors");
const utils_1 = require("./utils");
const bridge_1 = require("../bridge");
const callBridge = (0, bridge_1.getCallBridge)();
const deleteObjects = async ({ functionKey, keys }) => {
    await (0, utils_1.checkRestrictedEnvironment)();
    void callBridge('trackObjectStoreAction', { action: 'delete' });
    if (!functionKey || functionKey.length === 0) {
        throw new errors_1.BridgeAPIError('functionKey is required to delete objects');
    }
    if (!Array.isArray(keys) || keys.length === 0) {
        throw new errors_1.BridgeAPIError('keys array is required and must not be empty');
    }
    await Promise.all(keys.map(async (key) => {
        await (0, invoke_1.invoke)(functionKey, { key });
    }));
};
exports.deleteObjects = deleteObjects;
