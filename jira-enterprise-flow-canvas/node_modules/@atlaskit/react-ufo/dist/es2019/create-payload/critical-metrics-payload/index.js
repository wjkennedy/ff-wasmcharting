import { fg } from '@atlaskit/platform-feature-flags';
import { createRootCriticalMetricsPayload } from './root-metrics';
import { createSegmentMetricsPayloads } from './segment-metrics/create-segment-metrics';
export async function createCriticalMetricsPayloads(interactionId, interaction, vcMetrics) {
  const [rootPayload, segmentPayloads] = await Promise.all([createRootCriticalMetricsPayload(interactionId, interaction, vcMetrics), fg('platform_ufo_segment_critical_metrics') ? createSegmentMetricsPayloads(interactionId, interaction) : []]);
  return [rootPayload, ...segmentPayloads].filter(v => v != null);
}