"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useUFOReportError = useUFOReportError;
var _interactionContext = require("../interaction-context");
var _interactionMetrics = require("../interaction-metrics");
/**
 * Usage:
 * ```
 * import { useUFOReportError } from '@atlaskit/react-ufo/use-error-handler';
 *
 * const reportError = useUFOReportError();
 *
 * try {
 *   // something that can throw an error
 * } catch (error) {
 *   reportError(error)
 * }
 * ```
 * @returns `reportError` function
 */
function useUFOReportError() {
  var ufoContext = (0, _interactionContext.useInteractionContext)();
  var reportError = function reportError(error) {
    var interaction = (0, _interactionMetrics.getActiveInteraction)();
    if (interaction !== null && interaction !== void 0 && interaction.id) {
      (0, _interactionMetrics.addError)(interaction.id, error.name, (ufoContext === null || ufoContext === void 0 ? void 0 : ufoContext.labelStack) || null, error.name, error.errorMessage, error.errorStack, error.forcedError);
    } else {
      (0, _interactionMetrics.addErrorToAll)(error.name, (ufoContext === null || ufoContext === void 0 ? void 0 : ufoContext.labelStack) || null, error.name, error.errorMessage, error.errorStack);
    }
  };
  return reportError;
}