import { isAnyOf } from '../../utils/isAnyOf';
export function buildRequired(attrs, hasContent, name) {
  const required = ['type'];
  if (hasRequiredAttributes(attrs)) {
    required.push('attrs');
  }
  if (hasContent) {
    required.push('content');
  }

  // Version exists only on doc
  if (name === 'doc') {
    required.unshift('version');
  }
  return required;
}
export function hasRequiredAttributes(attrs) {
  let required = false;
  if (attrs) {
    if (isAnyOf(attrs)) {
      attrs.anyOf.forEach(attrsSet => {
        Object.values(attrsSet).forEach(value => {
          // If we have a single required attribute, we need the attrs field
          if (!value.optional) {
            required = true;
          }
        });
      });
    } else {
      Object.values(attrs).forEach(value => {
        // If we have a single required attribute, we need the attrs field
        if (!value.optional) {
          required = true;
        }
      });
    }
  }
  return required;
}
export function buildVariantRequired(content) {
  var _content$, _content$2, _content$3, _content$3$range;
  if (typeof ((_content$ = content[0]) === null || _content$ === void 0 ? void 0 : _content$.minItems) === 'number' && ((_content$2 = content[0]) === null || _content$2 === void 0 ? void 0 : _content$2.minItems) >= 1 || Boolean((_content$3 = content[0]) === null || _content$3 === void 0 ? void 0 : (_content$3$range = _content$3.range) === null || _content$3$range === void 0 ? void 0 : _content$3$range.type)) {
    return {
      required: ['content']
    };
  }
  return {};
}