import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import camelCase from 'lodash/camelCase';
import { _codeBlock, _namedImport, _namedTypeImport, _interface, buildADFAttributesTypes, _functionCallToVariable, _type, convertTypeToTypeName, stringifyWithUndefined } from './codeGenHelpers';
import { adfToPmAutogeneratedMessage } from './adfToPmAutogeneratedMessage';
import { objectToSortedArray } from './objectToSortedArray';
export var _markInterfaces = function _markInterfaces(markName, markType, markTypeDefinitionName, markAttrs) {
  var markAttrsName = "".concat(markName, "Attributes");
  if (markAttrs) {
    return [_interface(markAttrsName, buildADFAttributesTypes(markAttrs).join(';')), _interface(markTypeDefinitionName, "type: \"".concat(markType, "\", attrs: ").concat(markAttrsName)), _interface("".concat(markName, " extends Mark"), "attrs: ".concat(markAttrsName))].join('\n\n');
  }
  return [_interface(markTypeDefinitionName, "type: \"".concat(markType, "\"")), _type(markName, 'Mark')].join('\n\n');
};
export function pmMarksCodeGen(markResMap) {
  return _codeBlock(adfToPmAutogeneratedMessage, _namedImport('../../schema/createPMSpecFactory', 'createPMMarkSpecFactory'), _namedTypeImport('@atlaskit/editor-prosemirror/model', 'Mark'), objectToSortedArray(markResMap).map(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
      key = _ref2[0],
      _ref2$ = _ref2[1],
      mark = _ref2$.mark,
      pmMarkSpec = _ref2$.pmMarkSpec;
    var functionName = camelCase(key);
    var markName = convertTypeToTypeName(key, 'Mark');
    var markTypeDefinitionName = convertTypeToTypeName(key, 'Definition');
    var markAttrs = mark.getSpec().attrs;
    return _codeBlock(
    // build mark types
    _markInterfaces(markName, mark.getType(), markTypeDefinitionName, markAttrs),
    // build markSpec
    _functionCallToVariable(functionName, "createPMMarkSpecFactory".concat(markAttrs ? "<".concat(markName, ">") : ''), [stringifyWithUndefined(pmMarkSpec)]));
  }).join('\n\n'));
}