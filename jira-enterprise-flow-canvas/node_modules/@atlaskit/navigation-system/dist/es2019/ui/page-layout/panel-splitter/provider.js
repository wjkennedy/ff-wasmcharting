import React, { Fragment, useMemo, useRef } from 'react';
import { fg } from '@atlaskit/platform-feature-flags';
import { PanelSplitterContext } from './context';
/**
 * Provides the context required for the panel splitter to work within a page layout slot.
 *
 * Should be used in the layout area components, e.g. SideNav, Aside etc, as opposed to products.
 */
export const PanelSplitterProvider = ({
  panelId,
  panelWidth,
  onCompleteResize,
  getResizeBounds,
  resizingCssVar,
  panelRef,
  portalRef: providedPortalRef,
  position = 'end',
  isEnabled = true,
  shortcut,
  children
}) => {
  const portalRef = useRef(null);
  const context = useMemo(() => ({
    panelId,
    panelWidth,
    onCompleteResize,
    getResizeBounds,
    resizingCssVar,
    position,
    panelRef,
    isEnabled,
    portalRef: typeof providedPortalRef !== 'undefined' && fg('platform-dst-side-nav-layering-fixes') ? providedPortalRef : portalRef,
    shortcut
  }), [panelId, panelWidth, onCompleteResize, getResizeBounds, resizingCssVar, position, panelRef, isEnabled, providedPortalRef, shortcut]);
  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(PanelSplitterContext.Provider, {
    value: context
  }, children), typeof providedPortalRef !== 'undefined' && fg('platform-dst-side-nav-layering-fixes') ? null : /*#__PURE__*/React.createElement("div", {
    ref: portalRef
  }));
};