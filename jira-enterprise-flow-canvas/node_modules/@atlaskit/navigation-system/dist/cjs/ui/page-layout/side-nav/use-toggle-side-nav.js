"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useToggleSideNav = useToggleSideNav;
var _react = require("react");
var _visibilityContext = require("./visibility-context");
/**
 * __useToggleSideNav__
 *
 * Returns a function to toggle the side nav visibility.
 *
 * It will toggle the appropriate internal desktop or mobile side nav visibility state based on the current screen size.
 *
 * If you need a function to make the side nav visible, use `useExpandSideNav` instead.
 */
function useToggleSideNav() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$trigger = _ref.trigger,
    trigger = _ref$trigger === void 0 ? 'programmatic' : _ref$trigger;
  var setSideNavState = (0, _react.useContext)(_visibilityContext.SetSideNavVisibilityState);
  var toggleSideNav = (0, _react.useCallback)(function () {
    var _window$matchMedia = window.matchMedia('(min-width: 64rem)'),
      matches = _window$matchMedia.matches;
    if (matches) {
      setSideNavState(function (currentState) {
        // No-op if the side nav state has not been initialised yet
        // e.g. if the SideNav has not been mounted yet
        if (!currentState) {
          return null;
        }
        return {
          mobile: currentState.mobile,
          desktop: currentState.desktop === 'expanded' ? 'collapsed' : 'expanded',
          flyout: 'closed',
          lastTrigger: trigger
        };
      });
    } else {
      setSideNavState(function (currentState) {
        // No-op if the side nav state has not been initialised yet
        // e.g. if the SideNav has not been mounted yet
        if (!currentState) {
          return null;
        }
        return {
          desktop: currentState.desktop,
          mobile: currentState.mobile === 'expanded' ? 'collapsed' : 'expanded',
          flyout: 'closed',
          lastTrigger: trigger
        };
      });
    }
  }, [setSideNavState, trigger]);
  return toggleSideNav;
}