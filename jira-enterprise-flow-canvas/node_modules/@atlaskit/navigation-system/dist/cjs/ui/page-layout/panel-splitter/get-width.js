"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getWidthFromDragLocation = exports.getPixelWidth = void 0;
var _platformFeatureFlags = require("@atlaskit/platform-feature-flags");
/**
 * ⚠️ Note: We are not using the location.initial.input client locations because some browser extensions
 * can cause the client locations (e.g. clientX) in the `dragstart` event to incorrectly return 0.
 */
var getWidthFromDragLocation = exports.getWidthFromDragLocation = function getWidthFromDragLocation(_ref) {
  var initialWidth = _ref.initialWidth,
    location = _ref.location,
    initialClientX = _ref.initialClientX,
    direction = _ref.direction,
    position = _ref.position;
  var diffX = location.current.input.clientX - ((0, _platformFeatureFlags.fg)('platform-dst-panel-splitter-drag-start-client-x') ? initialClientX : location.initial.input.clientX);

  // Resize line is positioned at the inline-end (right) of the element.
  // If the direction is left-to-right, the width will increase when the mouse is moved to the right, and vice versa.
  if (position === 'end') {
    return direction === 'ltr' ? initialWidth + diffX : initialWidth - diffX;
  }

  // Resize line is positioned at the inline-start (left) of the element.
  // If the direction is left-to-right, the width will decrease when the mouse is moved to the right, and vice versa.
  return direction === 'ltr' ? initialWidth - diffX : initialWidth + diffX;
};
/**
 * Returns the computed width of an element in pixels.
 */
var getPixelWidth = exports.getPixelWidth = function getPixelWidth(element) {
  // Always returns an integer. Returns 0 if element is hidden / removed.
  return element.offsetWidth;
};